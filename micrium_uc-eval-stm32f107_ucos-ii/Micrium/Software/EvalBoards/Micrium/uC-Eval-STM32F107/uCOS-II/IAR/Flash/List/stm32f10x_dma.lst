###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.50.2.4510/W32 for ARM      08/Feb/2013  10:57:23 #
# Copyright 1999-2012 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\daniel01\Desktop\FastFile Test                  #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\BSP\ST\STM32\src\stm32f10x_dma.c                    #
#    Command line =  "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\BSP\ST\STM32\src\stm32f10x_dma.c" -D                #
#                    USE_STDPERIPH_DRIVER -lCN "C:\Users\daniel01\Desktop\Fas #
#                    tFile Test Folder\Micrium\Software\EvalBoards\Micrium\uC #
#                    -Eval-STM32F107\uCOS-II\IAR\Flash\List\" -o              #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\Flash\Obj\" --no_cse --no_unroll        #
#                    --no_inline --no_code_motion --no_tbaa --no_clustering   #
#                    --no_scheduling --debug --endian=little --cpu=Cortex-M3  #
#                    -e --fpu=None --dlib_config "C:\Program Files (x86)\IAR  #
#                    Systems\Embedded Workbench 6.5\arm\INC\c\DLib_Config_Nor #
#                    mal.h" -I "C:\Users\daniel01\Desktop\FastFile Test       #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\uCOS-II\" -I                      #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\uCOS-II\IAR\" -I                  #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\BSP\" -I                          #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\BSP\OS\uCOS-II\" -I               #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\BSP\ST\STM32\inc\" -I             #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\BSP\uCOS-II\" -I                  #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\BSP\IAR\" -I                      #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\..\..\..\uC-LIB\" -I              #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\..\..\..\uC-LIB\Ports\ARM-Cortex- #
#                    M3\IAR\" -I "C:\Users\daniel01\Desktop\FastFile Test     #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\..\..\..\uC-CPU\" -I              #
#                    "C:\Users\daniel01\Desktop\FastFile Test                 #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\..\..\..\uC-CPU\ARM-Cortex-M3\IAR #
#                    \" -I "C:\Users\daniel01\Desktop\FastFile Test           #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\..\..\..\..\..\uCOS-II\Ports\ARM-Cortex #
#                    -M3\Generic\IAR\" -I "C:\Users\daniel01\Desktop\FastFile #
#                     Test Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval #
#                    -STM32F107\uCOS-II\IAR\..\..\..\..\..\uCOS-II\Source\"   #
#                    -On --use_c++_inline                                     #
#    List file    =  C:\Users\daniel01\Desktop\FastFile Test                  #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\Flash\List\stm32f10x_dma.lst            #
#    Object file  =  C:\Users\daniel01\Desktop\FastFile Test                  #
#                    Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32 #
#                    F107\uCOS-II\IAR\Flash\Obj\stm32f10x_dma.o               #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\daniel01\Desktop\FastFile Test Folder\Micrium\Software\EvalBoards\Micrium\uC-Eval-STM32F107\BSP\ST\STM32\src\stm32f10x_dma.c
      1          /******************** (C) COPYRIGHT 2009 STMicroelectronics ********************
      2          * File Name          : stm32f10x_dma.c
      3          * Author             : MCD Application Team
      4          * Version            : V2.1.0RC2
      5          * Date               : 03/13/2009
      6          * Description        : This file provides all the DMA firmware functions.
      7          ********************************************************************************
      8          * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
      9          * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME.
     10          * AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT,
     11          * INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE
     12          * CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING
     13          * INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
     14          *******************************************************************************/
     15          
     16          /* Includes ------------------------------------------------------------------*/
     17          #include "stm32f10x_dma.h"
     18          #include "stm32f10x_rcc.h"
     19          
     20          /* Private typedef -----------------------------------------------------------*/
     21          /* Private define ------------------------------------------------------------*/
     22          /* DMA ENABLE mask */
     23          #define CCR_ENABLE_Set          ((u32)0x00000001)
     24          #define CCR_ENABLE_Reset        ((u32)0xFFFFFFFE)
     25          
     26          /* DMA1 Channelx interrupt pending bit masks */
     27          #define DMA1_Channel1_IT_Mask    ((u32)0x0000000F)
     28          #define DMA1_Channel2_IT_Mask    ((u32)0x000000F0)
     29          #define DMA1_Channel3_IT_Mask    ((u32)0x00000F00)
     30          #define DMA1_Channel4_IT_Mask    ((u32)0x0000F000)
     31          #define DMA1_Channel5_IT_Mask    ((u32)0x000F0000)
     32          #define DMA1_Channel6_IT_Mask    ((u32)0x00F00000)
     33          #define DMA1_Channel7_IT_Mask    ((u32)0x0F000000)
     34          
     35          /* DMA2 Channelx interrupt pending bit masks */
     36          #define DMA2_Channel1_IT_Mask    ((u32)0x0000000F)
     37          #define DMA2_Channel2_IT_Mask    ((u32)0x000000F0)
     38          #define DMA2_Channel3_IT_Mask    ((u32)0x00000F00)
     39          #define DMA2_Channel4_IT_Mask    ((u32)0x0000F000)
     40          #define DMA2_Channel5_IT_Mask    ((u32)0x000F0000)
     41          
     42          /* DMA2 FLAG mask */
     43          #define FLAG_Mask                ((u32)0x10000000)
     44          
     45          /* DMA registers Masks */
     46          #define CCR_CLEAR_Mask           ((u32)0xFFFF800F)
     47          
     48          /* Private macro -------------------------------------------------------------*/
     49          /* Private variables ---------------------------------------------------------*/
     50          /* Private function prototypes -----------------------------------------------*/
     51          /* Private functions ---------------------------------------------------------*/
     52          
     53          /*******************************************************************************
     54          * Function Name  : DMA_DeInit
     55          * Description    : Deinitializes the DMAy Channelx registers to their default reset
     56          *                  values.
     57          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and
     58          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
     59          *                    DMA Channel.
     60          * Output         : None
     61          * Return         : None
     62          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     63          void DMA_DeInit(DMA_Channel_TypeDef* DMAy_Channelx)
     64          {
     65            /* Check the parameters */
     66            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
     67          
     68            /* Disable the selected DMAy Channelx */
     69            DMAy_Channelx->CCR &= CCR_ENABLE_Reset;
   \                     DMA_DeInit:
   \   00000000   0x6801             LDR      R1,[R0, #+0]
   \   00000002   0x0849             LSRS     R1,R1,#+1
   \   00000004   0x0049             LSLS     R1,R1,#+1
   \   00000006   0x6001             STR      R1,[R0, #+0]
     70          
     71            /* Reset DMAy Channelx control register */
     72            DMAy_Channelx->CCR  = 0;
   \   00000008   0x2100             MOVS     R1,#+0
   \   0000000A   0x6001             STR      R1,[R0, #+0]
     73            
     74            /* Reset DMAy Channelx remaining bytes register */
     75            DMAy_Channelx->CNDTR = 0;
   \   0000000C   0x2100             MOVS     R1,#+0
   \   0000000E   0x6041             STR      R1,[R0, #+4]
     76            
     77            /* Reset DMAy Channelx peripheral address register */
     78            DMAy_Channelx->CPAR  = 0;
   \   00000010   0x2100             MOVS     R1,#+0
   \   00000012   0x6081             STR      R1,[R0, #+8]
     79            
     80            /* Reset DMAy Channelx memory address register */
     81            DMAy_Channelx->CMAR = 0;
   \   00000014   0x2100             MOVS     R1,#+0
   \   00000016   0x60C1             STR      R1,[R0, #+12]
     82          
     83            switch (*(u32*)&DMAy_Channelx)
   \   00000018   0x0001             MOVS     R1,R0
   \   0000001A   0x....             LDR.N    R2,??DataTable4  ;; 0x40020008
   \   0000001C   0x1A89             SUBS     R1,R1,R2
   \   0000001E   0xD018             BEQ.N    ??DMA_DeInit_0
   \   00000020   0x3914             SUBS     R1,R1,#+20
   \   00000022   0xD01D             BEQ.N    ??DMA_DeInit_1
   \   00000024   0x3914             SUBS     R1,R1,#+20
   \   00000026   0xD022             BEQ.N    ??DMA_DeInit_2
   \   00000028   0x3914             SUBS     R1,R1,#+20
   \   0000002A   0xD027             BEQ.N    ??DMA_DeInit_3
   \   0000002C   0x3914             SUBS     R1,R1,#+20
   \   0000002E   0xD02C             BEQ.N    ??DMA_DeInit_4
   \   00000030   0x3914             SUBS     R1,R1,#+20
   \   00000032   0xD031             BEQ.N    ??DMA_DeInit_5
   \   00000034   0x3914             SUBS     R1,R1,#+20
   \   00000036   0xD036             BEQ.N    ??DMA_DeInit_6
   \   00000038   0xF44F 0x7262      MOV      R2,#+904
   \   0000003C   0x1A89             SUBS     R1,R1,R2
   \   0000003E   0xD039             BEQ.N    ??DMA_DeInit_7
   \   00000040   0x3914             SUBS     R1,R1,#+20
   \   00000042   0xD03E             BEQ.N    ??DMA_DeInit_8
   \   00000044   0x3914             SUBS     R1,R1,#+20
   \   00000046   0xD043             BEQ.N    ??DMA_DeInit_9
   \   00000048   0x3914             SUBS     R1,R1,#+20
   \   0000004A   0xD048             BEQ.N    ??DMA_DeInit_10
   \   0000004C   0x3914             SUBS     R1,R1,#+20
   \   0000004E   0xD04D             BEQ.N    ??DMA_DeInit_11
   \   00000050   0xE053             B.N      ??DMA_DeInit_12
     84            {
     85              case DMA1_Channel1_BASE:
     86                /* Reset interrupt pending bits for DMA1 Channel1 */
     87                DMA1->IFCR |= DMA1_Channel1_IT_Mask;
   \                     ??DMA_DeInit_0:
   \   00000052   0x....             LDR.N    R1,??DataTable4_1  ;; 0x40020004
   \   00000054   0x6809             LDR      R1,[R1, #+0]
   \   00000056   0xF051 0x010F      ORRS     R1,R1,#0xF
   \   0000005A   0x....             LDR.N    R2,??DataTable4_1  ;; 0x40020004
   \   0000005C   0x6011             STR      R1,[R2, #+0]
     88                break;
   \   0000005E   0xE04C             B.N      ??DMA_DeInit_13
     89          
     90              case DMA1_Channel2_BASE:
     91                /* Reset interrupt pending bits for DMA1 Channel2 */
     92                DMA1->IFCR |= DMA1_Channel2_IT_Mask;
   \                     ??DMA_DeInit_1:
   \   00000060   0x....             LDR.N    R1,??DataTable4_1  ;; 0x40020004
   \   00000062   0x6809             LDR      R1,[R1, #+0]
   \   00000064   0xF051 0x01F0      ORRS     R1,R1,#0xF0
   \   00000068   0x....             LDR.N    R2,??DataTable4_1  ;; 0x40020004
   \   0000006A   0x6011             STR      R1,[R2, #+0]
     93                break;
   \   0000006C   0xE045             B.N      ??DMA_DeInit_13
     94          
     95              case DMA1_Channel3_BASE:
     96                /* Reset interrupt pending bits for DMA1 Channel3 */
     97                DMA1->IFCR |= DMA1_Channel3_IT_Mask;
   \                     ??DMA_DeInit_2:
   \   0000006E   0x....             LDR.N    R1,??DataTable4_1  ;; 0x40020004
   \   00000070   0x6809             LDR      R1,[R1, #+0]
   \   00000072   0xF451 0x6170      ORRS     R1,R1,#0xF00
   \   00000076   0x....             LDR.N    R2,??DataTable4_1  ;; 0x40020004
   \   00000078   0x6011             STR      R1,[R2, #+0]
     98                break;
   \   0000007A   0xE03E             B.N      ??DMA_DeInit_13
     99          
    100              case DMA1_Channel4_BASE:
    101                /* Reset interrupt pending bits for DMA1 Channel4 */
    102                DMA1->IFCR |= DMA1_Channel4_IT_Mask;
   \                     ??DMA_DeInit_3:
   \   0000007C   0x....             LDR.N    R1,??DataTable4_1  ;; 0x40020004
   \   0000007E   0x6809             LDR      R1,[R1, #+0]
   \   00000080   0xF451 0x4170      ORRS     R1,R1,#0xF000
   \   00000084   0x....             LDR.N    R2,??DataTable4_1  ;; 0x40020004
   \   00000086   0x6011             STR      R1,[R2, #+0]
    103                break;
   \   00000088   0xE037             B.N      ??DMA_DeInit_13
    104          
    105              case DMA1_Channel5_BASE:
    106                /* Reset interrupt pending bits for DMA1 Channel5 */
    107                DMA1->IFCR |= DMA1_Channel5_IT_Mask;
   \                     ??DMA_DeInit_4:
   \   0000008A   0x....             LDR.N    R1,??DataTable4_1  ;; 0x40020004
   \   0000008C   0x6809             LDR      R1,[R1, #+0]
   \   0000008E   0xF451 0x2170      ORRS     R1,R1,#0xF0000
   \   00000092   0x....             LDR.N    R2,??DataTable4_1  ;; 0x40020004
   \   00000094   0x6011             STR      R1,[R2, #+0]
    108                break;
   \   00000096   0xE030             B.N      ??DMA_DeInit_13
    109          
    110              case DMA1_Channel6_BASE:
    111                /* Reset interrupt pending bits for DMA1 Channel6 */
    112                DMA1->IFCR |= DMA1_Channel6_IT_Mask;
   \                     ??DMA_DeInit_5:
   \   00000098   0x....             LDR.N    R1,??DataTable4_1  ;; 0x40020004
   \   0000009A   0x6809             LDR      R1,[R1, #+0]
   \   0000009C   0xF451 0x0170      ORRS     R1,R1,#0xF00000
   \   000000A0   0x....             LDR.N    R2,??DataTable4_1  ;; 0x40020004
   \   000000A2   0x6011             STR      R1,[R2, #+0]
    113                break;
   \   000000A4   0xE029             B.N      ??DMA_DeInit_13
    114          
    115              case DMA1_Channel7_BASE:
    116                /* Reset interrupt pending bits for DMA1 Channel7 */
    117                DMA1->IFCR |= DMA1_Channel7_IT_Mask;
   \                     ??DMA_DeInit_6:
   \   000000A6   0x....             LDR.N    R1,??DataTable4_1  ;; 0x40020004
   \   000000A8   0x6809             LDR      R1,[R1, #+0]
   \   000000AA   0xF051 0x6170      ORRS     R1,R1,#0xF000000
   \   000000AE   0x....             LDR.N    R2,??DataTable4_1  ;; 0x40020004
   \   000000B0   0x6011             STR      R1,[R2, #+0]
    118                break;
   \   000000B2   0xE022             B.N      ??DMA_DeInit_13
    119          
    120              case DMA2_Channel1_BASE:
    121                /* Reset interrupt pending bits for DMA2 Channel1 */
    122                DMA2->IFCR |= DMA2_Channel1_IT_Mask;
   \                     ??DMA_DeInit_7:
   \   000000B4   0x....             LDR.N    R1,??DataTable4_2  ;; 0x40020404
   \   000000B6   0x6809             LDR      R1,[R1, #+0]
   \   000000B8   0xF051 0x010F      ORRS     R1,R1,#0xF
   \   000000BC   0x....             LDR.N    R2,??DataTable4_2  ;; 0x40020404
   \   000000BE   0x6011             STR      R1,[R2, #+0]
    123                break;
   \   000000C0   0xE01B             B.N      ??DMA_DeInit_13
    124          
    125              case DMA2_Channel2_BASE:
    126                /* Reset interrupt pending bits for DMA2 Channel2 */
    127                DMA2->IFCR |= DMA2_Channel2_IT_Mask;
   \                     ??DMA_DeInit_8:
   \   000000C2   0x....             LDR.N    R1,??DataTable4_2  ;; 0x40020404
   \   000000C4   0x6809             LDR      R1,[R1, #+0]
   \   000000C6   0xF051 0x01F0      ORRS     R1,R1,#0xF0
   \   000000CA   0x....             LDR.N    R2,??DataTable4_2  ;; 0x40020404
   \   000000CC   0x6011             STR      R1,[R2, #+0]
    128                break;
   \   000000CE   0xE014             B.N      ??DMA_DeInit_13
    129          
    130              case DMA2_Channel3_BASE:
    131                /* Reset interrupt pending bits for DMA2 Channel3 */
    132                DMA2->IFCR |= DMA2_Channel3_IT_Mask;
   \                     ??DMA_DeInit_9:
   \   000000D0   0x....             LDR.N    R1,??DataTable4_2  ;; 0x40020404
   \   000000D2   0x6809             LDR      R1,[R1, #+0]
   \   000000D4   0xF451 0x6170      ORRS     R1,R1,#0xF00
   \   000000D8   0x....             LDR.N    R2,??DataTable4_2  ;; 0x40020404
   \   000000DA   0x6011             STR      R1,[R2, #+0]
    133                break;
   \   000000DC   0xE00D             B.N      ??DMA_DeInit_13
    134          
    135              case DMA2_Channel4_BASE:
    136                /* Reset interrupt pending bits for DMA2 Channel4 */
    137                DMA2->IFCR |= DMA2_Channel4_IT_Mask;
   \                     ??DMA_DeInit_10:
   \   000000DE   0x....             LDR.N    R1,??DataTable4_2  ;; 0x40020404
   \   000000E0   0x6809             LDR      R1,[R1, #+0]
   \   000000E2   0xF451 0x4170      ORRS     R1,R1,#0xF000
   \   000000E6   0x....             LDR.N    R2,??DataTable4_2  ;; 0x40020404
   \   000000E8   0x6011             STR      R1,[R2, #+0]
    138                break;
   \   000000EA   0xE006             B.N      ??DMA_DeInit_13
    139          
    140              case DMA2_Channel5_BASE:
    141                /* Reset interrupt pending bits for DMA2 Channel5 */
    142                DMA2->IFCR |= DMA2_Channel5_IT_Mask;
   \                     ??DMA_DeInit_11:
   \   000000EC   0x....             LDR.N    R1,??DataTable4_2  ;; 0x40020404
   \   000000EE   0x6809             LDR      R1,[R1, #+0]
   \   000000F0   0xF451 0x2170      ORRS     R1,R1,#0xF0000
   \   000000F4   0x....             LDR.N    R2,??DataTable4_2  ;; 0x40020404
   \   000000F6   0x6011             STR      R1,[R2, #+0]
    143                break;
   \   000000F8   0xE7FF             B.N      ??DMA_DeInit_13
    144                
    145              default:
    146                break;
    147            }
    148          }
   \                     ??DMA_DeInit_12:
   \                     ??DMA_DeInit_13:
   \   000000FA   0x4770             BX       LR               ;; return
    149          
    150          /*******************************************************************************
    151          * Function Name  : DMA_Init
    152          * Description    : Initializes the DMAy Channelx according to the specified
    153          *                  parameters in the DMA_InitStruct.
    154          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    155          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    156          *                    DMA Channel.
    157          *                  - DMA_InitStruct: pointer to a DMA_InitTypeDef structure that
    158          *                    contains the configuration information for the specified
    159          *                    DMA Channel.
    160          * Output         : None
    161          * Return         : None
    162          ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    163          void DMA_Init(DMA_Channel_TypeDef* DMAy_Channelx, DMA_InitTypeDef* DMA_InitStruct)
    164          {
   \                     DMA_Init:
   \   00000000   0xB410             PUSH     {R4}
    165            u32 tmpreg = 0;
   \   00000002   0x2200             MOVS     R2,#+0
    166          
    167            /* Check the parameters */
    168            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    169            assert_param(IS_DMA_DIR(DMA_InitStruct->DMA_DIR));
    170            assert_param(IS_DMA_BUFFER_SIZE(DMA_InitStruct->DMA_BufferSize));
    171            assert_param(IS_DMA_PERIPHERAL_INC_STATE(DMA_InitStruct->DMA_PeripheralInc));
    172            assert_param(IS_DMA_MEMORY_INC_STATE(DMA_InitStruct->DMA_MemoryInc));   
    173            assert_param(IS_DMA_PERIPHERAL_DATA_SIZE(DMA_InitStruct->DMA_PeripheralDataSize));
    174            assert_param(IS_DMA_MEMORY_DATA_SIZE(DMA_InitStruct->DMA_MemoryDataSize));
    175            assert_param(IS_DMA_MODE(DMA_InitStruct->DMA_Mode));
    176            assert_param(IS_DMA_PRIORITY(DMA_InitStruct->DMA_Priority));
    177            assert_param(IS_DMA_M2M_STATE(DMA_InitStruct->DMA_M2M));
    178          
    179          /*--------------------------- DMAy Channelx CCR Configuration -----------------*/
    180            /* Get the DMAy_Channelx CCR value */
    181            tmpreg = DMAy_Channelx->CCR;
   \   00000004   0x6803             LDR      R3,[R0, #+0]
   \   00000006   0x001A             MOVS     R2,R3
    182            /* Clear MEM2MEM, PL, MSIZE, PSIZE, MINC, PINC, CIRC and DIR bits */
    183            tmpreg &= CCR_CLEAR_Mask;
   \   00000008   0xF36F 0x120E      BFC      R2,#+4,#+11
    184            /* Configure DMAy Channelx: data transfer, data size, priority level and mode */
    185            /* Set DIR bit according to DMA_DIR value */
    186            /* Set CIRC bit according to DMA_Mode value */
    187            /* Set PINC bit according to DMA_PeripheralInc value */
    188            /* Set MINC bit according to DMA_MemoryInc value */
    189            /* Set PSIZE bits according to DMA_PeripheralDataSize value */
    190            /* Set MSIZE bits according to DMA_MemoryDataSize value */
    191            /* Set PL bits according to DMA_Priority value */
    192            /* Set the MEM2MEM bit according to DMA_M2M value */
    193            tmpreg |= DMA_InitStruct->DMA_DIR | DMA_InitStruct->DMA_Mode |
    194                      DMA_InitStruct->DMA_PeripheralInc | DMA_InitStruct->DMA_MemoryInc |
    195                      DMA_InitStruct->DMA_PeripheralDataSize | DMA_InitStruct->DMA_MemoryDataSize |
    196                      DMA_InitStruct->DMA_Priority | DMA_InitStruct->DMA_M2M;
   \   0000000C   0x688B             LDR      R3,[R1, #+8]
   \   0000000E   0x6A0C             LDR      R4,[R1, #+32]
   \   00000010   0x4323             ORRS     R3,R4,R3
   \   00000012   0x690C             LDR      R4,[R1, #+16]
   \   00000014   0x4323             ORRS     R3,R4,R3
   \   00000016   0x694C             LDR      R4,[R1, #+20]
   \   00000018   0x4323             ORRS     R3,R4,R3
   \   0000001A   0x698C             LDR      R4,[R1, #+24]
   \   0000001C   0x4323             ORRS     R3,R4,R3
   \   0000001E   0x69CC             LDR      R4,[R1, #+28]
   \   00000020   0x4323             ORRS     R3,R4,R3
   \   00000022   0x6A4C             LDR      R4,[R1, #+36]
   \   00000024   0x4323             ORRS     R3,R4,R3
   \   00000026   0x6A8C             LDR      R4,[R1, #+40]
   \   00000028   0x4323             ORRS     R3,R4,R3
   \   0000002A   0x431A             ORRS     R2,R3,R2
    197            /* Write to DMAy Channelx CCR */
    198            DMAy_Channelx->CCR = tmpreg;
   \   0000002C   0x6002             STR      R2,[R0, #+0]
    199          
    200          /*--------------------------- DMAy Channelx CNDTR Configuration ---------------*/
    201            /* Write to DMAy Channelx CNDTR */
    202            DMAy_Channelx->CNDTR = DMA_InitStruct->DMA_BufferSize;
   \   0000002E   0x68CB             LDR      R3,[R1, #+12]
   \   00000030   0x6043             STR      R3,[R0, #+4]
    203          
    204          /*--------------------------- DMAy Channelx CPAR Configuration ----------------*/
    205            /* Write to DMAy Channelx CPAR */
    206            DMAy_Channelx->CPAR = DMA_InitStruct->DMA_PeripheralBaseAddr;
   \   00000032   0x680B             LDR      R3,[R1, #+0]
   \   00000034   0x6083             STR      R3,[R0, #+8]
    207          
    208          /*--------------------------- DMAy Channelx CMAR Configuration ----------------*/
    209            /* Write to DMAy Channelx CMAR */
    210            DMAy_Channelx->CMAR = DMA_InitStruct->DMA_MemoryBaseAddr;
   \   00000036   0x684B             LDR      R3,[R1, #+4]
   \   00000038   0x60C3             STR      R3,[R0, #+12]
    211          }
   \   0000003A   0xBC10             POP      {R4}
   \   0000003C   0x4770             BX       LR               ;; return
    212          
    213          /*******************************************************************************
    214          * Function Name  : DMA_StructInit
    215          * Description    : Fills each DMA_InitStruct member with its default value.
    216          * Input          : - DMA_InitStruct : pointer to a DMA_InitTypeDef structure
    217          *                    which will be initialized.
    218          * Output         : None
    219          * Return         : None
    220          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    221          void DMA_StructInit(DMA_InitTypeDef* DMA_InitStruct)
    222          {
    223          /*-------------- Reset DMA init structure parameters values ------------------*/
    224            /* Initialize the DMA_PeripheralBaseAddr member */
    225            DMA_InitStruct->DMA_PeripheralBaseAddr = 0;
   \                     DMA_StructInit:
   \   00000000   0x2100             MOVS     R1,#+0
   \   00000002   0x6001             STR      R1,[R0, #+0]
    226          
    227            /* Initialize the DMA_MemoryBaseAddr member */
    228            DMA_InitStruct->DMA_MemoryBaseAddr = 0;
   \   00000004   0x2100             MOVS     R1,#+0
   \   00000006   0x6041             STR      R1,[R0, #+4]
    229          
    230            /* Initialize the DMA_DIR member */
    231            DMA_InitStruct->DMA_DIR = DMA_DIR_PeripheralSRC;
   \   00000008   0x2100             MOVS     R1,#+0
   \   0000000A   0x6081             STR      R1,[R0, #+8]
    232          
    233            /* Initialize the DMA_BufferSize member */
    234            DMA_InitStruct->DMA_BufferSize = 0;
   \   0000000C   0x2100             MOVS     R1,#+0
   \   0000000E   0x60C1             STR      R1,[R0, #+12]
    235          
    236            /* Initialize the DMA_PeripheralInc member */
    237            DMA_InitStruct->DMA_PeripheralInc = DMA_PeripheralInc_Disable;
   \   00000010   0x2100             MOVS     R1,#+0
   \   00000012   0x6101             STR      R1,[R0, #+16]
    238          
    239            /* Initialize the DMA_MemoryInc member */
    240            DMA_InitStruct->DMA_MemoryInc = DMA_MemoryInc_Disable;
   \   00000014   0x2100             MOVS     R1,#+0
   \   00000016   0x6141             STR      R1,[R0, #+20]
    241          
    242            /* Initialize the DMA_PeripheralDataSize member */
    243            DMA_InitStruct->DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;
   \   00000018   0x2100             MOVS     R1,#+0
   \   0000001A   0x6181             STR      R1,[R0, #+24]
    244          
    245            /* Initialize the DMA_MemoryDataSize member */
    246            DMA_InitStruct->DMA_MemoryDataSize = DMA_MemoryDataSize_Byte;
   \   0000001C   0x2100             MOVS     R1,#+0
   \   0000001E   0x61C1             STR      R1,[R0, #+28]
    247          
    248            /* Initialize the DMA_Mode member */
    249            DMA_InitStruct->DMA_Mode = DMA_Mode_Normal;
   \   00000020   0x2100             MOVS     R1,#+0
   \   00000022   0x6201             STR      R1,[R0, #+32]
    250          
    251            /* Initialize the DMA_Priority member */
    252            DMA_InitStruct->DMA_Priority = DMA_Priority_Low;
   \   00000024   0x2100             MOVS     R1,#+0
   \   00000026   0x6241             STR      R1,[R0, #+36]
    253          
    254            /* Initialize the DMA_M2M member */
    255            DMA_InitStruct->DMA_M2M = DMA_M2M_Disable;
   \   00000028   0x2100             MOVS     R1,#+0
   \   0000002A   0x6281             STR      R1,[R0, #+40]
    256          }
   \   0000002C   0x4770             BX       LR               ;; return
    257          
    258          /*******************************************************************************
    259          * Function Name  : DMA_Cmd
    260          * Description    : Enables or disables the specified DMAy Channelx.
    261          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    262          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    263          *                    DMA Channel.
    264          *                  - NewState: new state of the DMAy Channelx. 
    265          *                    This parameter can be: ENABLE or DISABLE.
    266          * Output         : None
    267          * Return         : None
    268          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    269          void DMA_Cmd(DMA_Channel_TypeDef* DMAy_Channelx, FunctionalState NewState)
    270          {
    271            /* Check the parameters */
    272            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    273            assert_param(IS_FUNCTIONAL_STATE(NewState));
    274          
    275            if (NewState != DISABLE)
   \                     DMA_Cmd:
   \   00000000   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000002   0x2900             CMP      R1,#+0
   \   00000004   0xD004             BEQ.N    ??DMA_Cmd_0
    276            {
    277              /* Enable the selected DMAy Channelx */
    278              DMAy_Channelx->CCR |= CCR_ENABLE_Set;
   \   00000006   0x6802             LDR      R2,[R0, #+0]
   \   00000008   0xF052 0x0201      ORRS     R2,R2,#0x1
   \   0000000C   0x6002             STR      R2,[R0, #+0]
   \   0000000E   0xE003             B.N      ??DMA_Cmd_1
    279            }
    280            else
    281            {
    282              /* Disable the selected DMAy Channelx */
    283              DMAy_Channelx->CCR &= CCR_ENABLE_Reset;
   \                     ??DMA_Cmd_0:
   \   00000010   0x6802             LDR      R2,[R0, #+0]
   \   00000012   0x0852             LSRS     R2,R2,#+1
   \   00000014   0x0052             LSLS     R2,R2,#+1
   \   00000016   0x6002             STR      R2,[R0, #+0]
    284            }
    285          }
   \                     ??DMA_Cmd_1:
   \   00000018   0x4770             BX       LR               ;; return
    286          
    287          /*******************************************************************************
    288          * Function Name  : DMA_ITConfig
    289          * Description    : Enables or disables the specified DMAy Channelx interrupts.
    290          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    291          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    292          *                    DMA Channel.
    293          *                  - DMA_IT: specifies the DMA interrupts sources to be enabled
    294          *                    or disabled. 
    295          *                    This parameter can be any combination of the following values:
    296          *                       - DMA_IT_TC:  Transfer complete interrupt mask
    297          *                       - DMA_IT_HT:  Half transfer interrupt mask
    298          *                       - DMA_IT_TE:  Transfer error interrupt mask
    299          *                  - NewState: new state of the specified DMA interrupts.
    300          *                    This parameter can be: ENABLE or DISABLE.
    301          * Output         : None
    302          * Return         : None
    303          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    304          void DMA_ITConfig(DMA_Channel_TypeDef* DMAy_Channelx, u32 DMA_IT, FunctionalState NewState)
    305          {
    306            /* Check the parameters */
    307            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    308            assert_param(IS_DMA_CONFIG_IT(DMA_IT));
    309            assert_param(IS_FUNCTIONAL_STATE(NewState));
    310          
    311            if (NewState != DISABLE)
   \                     DMA_ITConfig:
   \   00000000   0xB2D2             UXTB     R2,R2            ;; ZeroExt  R2,R2,#+24,#+24
   \   00000002   0x2A00             CMP      R2,#+0
   \   00000004   0xD003             BEQ.N    ??DMA_ITConfig_0
    312            {
    313              /* Enable the selected DMA interrupts */
    314              DMAy_Channelx->CCR |= DMA_IT;
   \   00000006   0x6803             LDR      R3,[R0, #+0]
   \   00000008   0x430B             ORRS     R3,R1,R3
   \   0000000A   0x6003             STR      R3,[R0, #+0]
   \   0000000C   0xE002             B.N      ??DMA_ITConfig_1
    315            }
    316            else
    317            {
    318              /* Disable the selected DMA interrupts */
    319              DMAy_Channelx->CCR &= ~DMA_IT;
   \                     ??DMA_ITConfig_0:
   \   0000000E   0x6803             LDR      R3,[R0, #+0]
   \   00000010   0x438B             BICS     R3,R3,R1
   \   00000012   0x6003             STR      R3,[R0, #+0]
    320            }
    321          }
   \                     ??DMA_ITConfig_1:
   \   00000014   0x4770             BX       LR               ;; return
    322          
    323          /*******************************************************************************
    324          * Function Name  : DMA_GetCurrDataCounter
    325          * Description    : Returns the number of remaining data units in the current
    326          *                  DMAy Channelx transfer.
    327          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    328          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    329          *                    DMA Channel.
    330          * Output         : None
    331          * Return         : The number of remaining data units in the current DMAy Channelx
    332          *                  transfer.
    333          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    334          u16 DMA_GetCurrDataCounter(DMA_Channel_TypeDef* DMAy_Channelx)
    335          {
    336            /* Check the parameters */
    337            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    338          
    339            /* Return the number of remaining data units for DMAy Channelx */
    340            return ((u16)(DMAy_Channelx->CNDTR));
   \                     DMA_GetCurrDataCounter:
   \   00000000   0x6840             LDR      R0,[R0, #+4]
   \   00000002   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000004   0x4770             BX       LR               ;; return
    341          }
    342          
    343          /*******************************************************************************
    344          * Function Name  : DMA_GetFlagStatus
    345          * Description    : Checks whether the specified DMAy Channelx flag is set or not.
    346          * Input          : - DMA_FLAG: specifies the flag to check.
    347          *                    This parameter can be one of the following values:
    348          *                       - DMA1_FLAG_GL1: DMA1 Channel1 global flag.
    349          *                       - DMA1_FLAG_TC1: DMA1 Channel1 transfer complete flag.
    350          *                       - DMA1_FLAG_HT1: DMA1 Channel1 half transfer flag.
    351          *                       - DMA1_FLAG_TE1: DMA1 Channel1 transfer error flag.
    352          *                       - DMA1_FLAG_GL2: DMA1 Channel2 global flag.
    353          *                       - DMA1_FLAG_TC2: DMA1 Channel2 transfer complete flag.
    354          *                       - DMA1_FLAG_HT2: DMA1 Channel2 half transfer flag.
    355          *                       - DMA1_FLAG_TE2: DMA1 Channel2 transfer error flag.
    356          *                       - DMA1_FLAG_GL3: DMA1 Channel3 global flag.
    357          *                       - DMA1_FLAG_TC3: DMA1 Channel3 transfer complete flag.
    358          *                       - DMA1_FLAG_HT3: DMA1 Channel3 half transfer flag.
    359          *                       - DMA1_FLAG_TE3: DMA1 Channel3 transfer error flag.
    360          *                       - DMA1_FLAG_GL4: DMA1 Channel4 global flag.
    361          *                       - DMA1_FLAG_TC4: DMA1 Channel4 transfer complete flag.
    362          *                       - DMA1_FLAG_HT4: DMA1 Channel4 half transfer flag.
    363          *                       - DMA1_FLAG_TE4: DMA1 Channel4 transfer error flag.
    364          *                       - DMA1_FLAG_GL5: DMA1 Channel5 global flag.
    365          *                       - DMA1_FLAG_TC5: DMA1 Channel5 transfer complete flag.
    366          *                       - DMA1_FLAG_HT5: DMA1 Channel5 half transfer flag.
    367          *                       - DMA1_FLAG_TE5: DMA1 Channel5 transfer error flag.
    368          *                       - DMA1_FLAG_GL6: DMA1 Channel6 global flag.
    369          *                       - DMA1_FLAG_TC6: DMA1 Channel6 transfer complete flag.
    370          *                       - DMA1_FLAG_HT6: DMA1 Channel6 half transfer flag.
    371          *                       - DMA1_FLAG_TE6: DMA1 Channel6 transfer error flag.
    372          *                       - DMA1_FLAG_GL7: DMA1 Channel7 global flag.
    373          *                       - DMA1_FLAG_TC7: DMA1 Channel7 transfer complete flag.
    374          *                       - DMA1_FLAG_HT7: DMA1 Channel7 half transfer flag.
    375          *                       - DMA1_FLAG_TE7: DMA1 Channel7 transfer error flag.
    376          *                       - DMA2_FLAG_GL1: DMA2 Channel1 global flag.
    377          *                       - DMA2_FLAG_TC1: DMA2 Channel1 transfer complete flag.
    378          *                       - DMA2_FLAG_HT1: DMA2 Channel1 half transfer flag.
    379          *                       - DMA2_FLAG_TE1: DMA2 Channel1 transfer error flag.
    380          *                       - DMA2_FLAG_GL2: DMA2 Channel2 global flag.
    381          *                       - DMA2_FLAG_TC2: DMA2 Channel2 transfer complete flag.
    382          *                       - DMA2_FLAG_HT2: DMA2 Channel2 half transfer flag.
    383          *                       - DMA2_FLAG_TE2: DMA2 Channel2 transfer error flag.
    384          *                       - DMA2_FLAG_GL3: DMA2 Channel3 global flag.
    385          *                       - DMA2_FLAG_TC3: DMA2 Channel3 transfer complete flag.
    386          *                       - DMA2_FLAG_HT3: DMA2 Channel3 half transfer flag.
    387          *                       - DMA2_FLAG_TE3: DMA2 Channel3 transfer error flag.
    388          *                       - DMA2_FLAG_GL4: DMA2 Channel4 global flag.
    389          *                       - DMA2_FLAG_TC4: DMA2 Channel4 transfer complete flag.
    390          *                       - DMA2_FLAG_HT4: DMA2 Channel4 half transfer flag.
    391          *                       - DMA2_FLAG_TE4: DMA2 Channel4 transfer error flag.
    392          *                       - DMA2_FLAG_GL5: DMA2 Channel5 global flag.
    393          *                       - DMA2_FLAG_TC5: DMA2 Channel5 transfer complete flag.
    394          *                       - DMA2_FLAG_HT5: DMA2 Channel5 half transfer flag.
    395          *                       - DMA2_FLAG_TE5: DMA2 Channel5 transfer error flag.
    396          * Output         : None
    397          * Return         : The new state of DMA_FLAG (SET or RESET).
    398          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    399          FlagStatus DMA_GetFlagStatus(u32 DMA_FLAG)
    400          {
   \                     DMA_GetFlagStatus:
   \   00000000   0x0001             MOVS     R1,R0
    401            FlagStatus bitstatus = RESET;
   \   00000002   0x2000             MOVS     R0,#+0
    402            u32 tmpreg = 0;
   \   00000004   0x2200             MOVS     R2,#+0
    403          
    404            /* Check the parameters */
    405            assert_param(IS_DMA_GET_FLAG(DMA_FLAG));
    406          
    407            /* Calculate the used DMA */
    408            if ((DMA_FLAG & FLAG_Mask) != (u32)RESET)
   \   00000006   0x00CB             LSLS     R3,R1,#+3
   \   00000008   0xD503             BPL.N    ??DMA_GetFlagStatus_0
    409            {
    410              /* Get DMA2 ISR register value */
    411              tmpreg = DMA2->ISR ;
   \   0000000A   0x....             LDR.N    R3,??DataTable4_3  ;; 0x40020400
   \   0000000C   0x681B             LDR      R3,[R3, #+0]
   \   0000000E   0x001A             MOVS     R2,R3
   \   00000010   0xE002             B.N      ??DMA_GetFlagStatus_1
    412            }
    413            else
    414            {
    415              /* Get DMA1 ISR register value */
    416              tmpreg = DMA1->ISR ;
   \                     ??DMA_GetFlagStatus_0:
   \   00000012   0x....             LDR.N    R3,??DataTable4_4  ;; 0x40020000
   \   00000014   0x681B             LDR      R3,[R3, #+0]
   \   00000016   0x001A             MOVS     R2,R3
    417            }
    418          
    419            /* Check the status of the specified DMA flag */
    420            if ((tmpreg & DMA_FLAG) != (u32)RESET)
   \                     ??DMA_GetFlagStatus_1:
   \   00000018   0x420A             TST      R2,R1
   \   0000001A   0xD002             BEQ.N    ??DMA_GetFlagStatus_2
    421            {
    422              /* DMA_FLAG is set */
    423              bitstatus = SET;
   \   0000001C   0x2301             MOVS     R3,#+1
   \   0000001E   0x0018             MOVS     R0,R3
   \   00000020   0xE001             B.N      ??DMA_GetFlagStatus_3
    424            }
    425            else
    426            {
    427              /* DMA_FLAG is reset */
    428              bitstatus = RESET;
   \                     ??DMA_GetFlagStatus_2:
   \   00000022   0x2300             MOVS     R3,#+0
   \   00000024   0x0018             MOVS     R0,R3
    429            }
    430            
    431            /* Return the DMA_FLAG status */
    432            return  bitstatus;
   \                     ??DMA_GetFlagStatus_3:
   \   00000026   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000028   0x4770             BX       LR               ;; return
    433          }
    434          
    435          /*******************************************************************************
    436          * Function Name  : DMA_ClearFlag
    437          * Description    : Clears the DMAy Channelx's pending flags.
    438          * Input          : - DMA_FLAG: specifies the flag to clear.
    439          *                    This parameter can be any combination (for the same DMA) of 
    440          *                    the following values:
    441          *                       - DMA1_FLAG_GL1: DMA1 Channel1 global flag.
    442          *                       - DMA1_FLAG_TC1: DMA1 Channel1 transfer complete flag.
    443          *                       - DMA1_FLAG_HT1: DMA1 Channel1 half transfer flag.
    444          *                       - DMA1_FLAG_TE1: DMA1 Channel1 transfer error flag.
    445          *                       - DMA1_FLAG_GL2: DMA1 Channel2 global flag.
    446          *                       - DMA1_FLAG_TC2: DMA1 Channel2 transfer complete flag.
    447          *                       - DMA1_FLAG_HT2: DMA1 Channel2 half transfer flag.
    448          *                       - DMA1_FLAG_TE2: DMA1 Channel2 transfer error flag.
    449          *                       - DMA1_FLAG_GL3: DMA1 Channel3 global flag.
    450          *                       - DMA1_FLAG_TC3: DMA1 Channel3 transfer complete flag.
    451          *                       - DMA1_FLAG_HT3: DMA1 Channel3 half transfer flag.
    452          *                       - DMA1_FLAG_TE3: DMA1 Channel3 transfer error flag.
    453          *                       - DMA1_FLAG_GL4: DMA1 Channel4 global flag.
    454          *                       - DMA1_FLAG_TC4: DMA1 Channel4 transfer complete flag.
    455          *                       - DMA1_FLAG_HT4: DMA1 Channel4 half transfer flag.
    456          *                       - DMA1_FLAG_TE4: DMA1 Channel4 transfer error flag.
    457          *                       - DMA1_FLAG_GL5: DMA1 Channel5 global flag.
    458          *                       - DMA1_FLAG_TC5: DMA1 Channel5 transfer complete flag.
    459          *                       - DMA1_FLAG_HT5: DMA1 Channel5 half transfer flag.
    460          *                       - DMA1_FLAG_TE5: DMA1 Channel5 transfer error flag.
    461          *                       - DMA1_FLAG_GL6: DMA1 Channel6 global flag.
    462          *                       - DMA1_FLAG_TC6: DMA1 Channel6 transfer complete flag.
    463          *                       - DMA1_FLAG_HT6: DMA1 Channel6 half transfer flag.
    464          *                       - DMA1_FLAG_TE6: DMA1 Channel6 transfer error flag.
    465          *                       - DMA1_FLAG_GL7: DMA1 Channel7 global flag.
    466          *                       - DMA1_FLAG_TC7: DMA1 Channel7 transfer complete flag.
    467          *                       - DMA1_FLAG_HT7: DMA1 Channel7 half transfer flag.
    468          *                       - DMA1_FLAG_TE7: DMA1 Channel7 transfer error flag.
    469          *                       - DMA2_FLAG_GL1: DMA2 Channel1 global flag.
    470          *                       - DMA2_FLAG_TC1: DMA2 Channel1 transfer complete flag.
    471          *                       - DMA2_FLAG_HT1: DMA2 Channel1 half transfer flag.
    472          *                       - DMA2_FLAG_TE1: DMA2 Channel1 transfer error flag.
    473          *                       - DMA2_FLAG_GL2: DMA2 Channel2 global flag.
    474          *                       - DMA2_FLAG_TC2: DMA2 Channel2 transfer complete flag.
    475          *                       - DMA2_FLAG_HT2: DMA2 Channel2 half transfer flag.
    476          *                       - DMA2_FLAG_TE2: DMA2 Channel2 transfer error flag.
    477          *                       - DMA2_FLAG_GL3: DMA2 Channel3 global flag.
    478          *                       - DMA2_FLAG_TC3: DMA2 Channel3 transfer complete flag.
    479          *                       - DMA2_FLAG_HT3: DMA2 Channel3 half transfer flag.
    480          *                       - DMA2_FLAG_TE3: DMA2 Channel3 transfer error flag.
    481          *                       - DMA2_FLAG_GL4: DMA2 Channel4 global flag.
    482          *                       - DMA2_FLAG_TC4: DMA2 Channel4 transfer complete flag.
    483          *                       - DMA2_FLAG_HT4: DMA2 Channel4 half transfer flag.
    484          *                       - DMA2_FLAG_TE4: DMA2 Channel4 transfer error flag.
    485          *                       - DMA2_FLAG_GL5: DMA2 Channel5 global flag.
    486          *                       - DMA2_FLAG_TC5: DMA2 Channel5 transfer complete flag.
    487          *                       - DMA2_FLAG_HT5: DMA2 Channel5 half transfer flag.
    488          *                       - DMA2_FLAG_TE5: DMA2 Channel5 transfer error flag.
    489          * Output         : None
    490          * Return         : None
    491          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    492          void DMA_ClearFlag(u32 DMA_FLAG)
    493          {
    494            /* Check the parameters */
    495            assert_param(IS_DMA_CLEAR_FLAG(DMA_FLAG));
    496          
    497            /* Calculate the used DMA */
    498            if ((DMA_FLAG & FLAG_Mask) != (u32)RESET)
   \                     DMA_ClearFlag:
   \   00000000   0x00C1             LSLS     R1,R0,#+3
   \   00000002   0xD502             BPL.N    ??DMA_ClearFlag_0
    499            {
    500              /* Clear the selected DMA flags */
    501              DMA2->IFCR = DMA_FLAG;
   \   00000004   0x....             LDR.N    R1,??DataTable4_2  ;; 0x40020404
   \   00000006   0x6008             STR      R0,[R1, #+0]
   \   00000008   0xE001             B.N      ??DMA_ClearFlag_1
    502            }
    503            else
    504            {
    505              /* Clear the selected DMA flags */
    506              DMA1->IFCR = DMA_FLAG;
   \                     ??DMA_ClearFlag_0:
   \   0000000A   0x....             LDR.N    R1,??DataTable4_1  ;; 0x40020004
   \   0000000C   0x6008             STR      R0,[R1, #+0]
    507            }
    508          }
   \                     ??DMA_ClearFlag_1:
   \   0000000E   0x4770             BX       LR               ;; return
    509          
    510          /*******************************************************************************
    511          * Function Name  : DMA_GetITStatus
    512          * Description    : Checks whether the specified DMAy Channelx interrupt has 
    513          *                  occurred or not.
    514          * Input          : - DMA_IT: specifies the DMA interrupt source to check. 
    515          *                    This parameter can be one of the following values:
    516          *                       - DMA1_IT_GL1: DMA1 Channel1 global interrupt.
    517          *                       - DMA1_IT_TC1: DMA1 Channel1 transfer complete interrupt.
    518          *                       - DMA1_IT_HT1: DMA1 Channel1 half transfer interrupt.
    519          *                       - DMA1_IT_TE1: DMA1 Channel1 transfer error interrupt.
    520          *                       - DMA1_IT_GL2: DMA1 Channel2 global interrupt.
    521          *                       - DMA1_IT_TC2: DMA1 Channel2 transfer complete interrupt.
    522          *                       - DMA1_IT_HT2: DMA1 Channel2 half transfer interrupt.
    523          *                       - DMA1_IT_TE2: DMA1 Channel2 transfer error interrupt.
    524          *                       - DMA1_IT_GL3: DMA1 Channel3 global interrupt.
    525          *                       - DMA1_IT_TC3: DMA1 Channel3 transfer complete interrupt.
    526          *                       - DMA1_IT_HT3: DMA1 Channel3 half transfer interrupt.
    527          *                       - DMA1_IT_TE3: DMA1 Channel3 transfer error interrupt.
    528          *                       - DMA1_IT_GL4: DMA1 Channel4 global interrupt.
    529          *                       - DMA1_IT_TC4: DMA1 Channel4 transfer complete interrupt.
    530          *                       - DMA1_IT_HT4: DMA1 Channel4 half transfer interrupt.
    531          *                       - DMA1_IT_TE4: DMA1 Channel4 transfer error interrupt.
    532          *                       - DMA1_IT_GL5: DMA1 Channel5 global interrupt.
    533          *                       - DMA1_IT_TC5: DMA1 Channel5 transfer complete interrupt.
    534          *                       - DMA1_IT_HT5: DMA1 Channel5 half transfer interrupt.
    535          *                       - DMA1_IT_TE5: DMA1 Channel5 transfer error interrupt.
    536          *                       - DMA1_IT_GL6: DMA1 Channel6 global interrupt.
    537          *                       - DMA1_IT_TC6: DMA1 Channel6 transfer complete interrupt.
    538          *                       - DMA1_IT_HT6: DMA1 Channel6 half transfer interrupt.
    539          *                       - DMA1_IT_TE6: DMA1 Channel6 transfer error interrupt.
    540          *                       - DMA1_IT_GL7: DMA1 Channel7 global interrupt.
    541          *                       - DMA1_IT_TC7: DMA1 Channel7 transfer complete interrupt.
    542          *                       - DMA1_IT_HT7: DMA1 Channel7 half transfer interrupt.
    543          *                       - DMA1_IT_TE7: DMA1 Channel7 transfer error interrupt.
    544          *                       - DMA2_IT_GL1: DMA2 Channel1 global interrupt.
    545          *                       - DMA2_IT_TC1: DMA2 Channel1 transfer complete interrupt.
    546          *                       - DMA2_IT_HT1: DMA2 Channel1 half transfer interrupt.
    547          *                       - DMA2_IT_TE1: DMA2 Channel1 transfer error interrupt.
    548          *                       - DMA2_IT_GL2: DMA2 Channel2 global interrupt.
    549          *                       - DMA2_IT_TC2: DMA2 Channel2 transfer complete interrupt.
    550          *                       - DMA2_IT_HT2: DMA2 Channel2 half transfer interrupt.
    551          *                       - DMA2_IT_TE2: DMA2 Channel2 transfer error interrupt.
    552          *                       - DMA2_IT_GL3: DMA2 Channel3 global interrupt.
    553          *                       - DMA2_IT_TC3: DMA2 Channel3 transfer complete interrupt.
    554          *                       - DMA2_IT_HT3: DMA2 Channel3 half transfer interrupt.
    555          *                       - DMA2_IT_TE3: DMA2 Channel3 transfer error interrupt.
    556          *                       - DMA2_IT_GL4: DMA2 Channel4 global interrupt.
    557          *                       - DMA2_IT_TC4: DMA2 Channel4 transfer complete interrupt.
    558          *                       - DMA2_IT_HT4: DMA2 Channel4 half transfer interrupt.
    559          *                       - DMA2_IT_TE4: DMA2 Channel4 transfer error interrupt.
    560          *                       - DMA2_IT_GL5: DMA2 Channel5 global interrupt.
    561          *                       - DMA2_IT_TC5: DMA2 Channel5 transfer complete interrupt.
    562          *                       - DMA2_IT_HT5: DMA2 Channel5 half transfer interrupt.
    563          *                       - DMA2_IT_TE5: DMA2 Channel5 transfer error interrupt.
    564          * Output         : None
    565          * Return         : The new state of DMA_IT (SET or RESET).
    566          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    567          ITStatus DMA_GetITStatus(u32 DMA_IT)
    568          {
   \                     DMA_GetITStatus:
   \   00000000   0x0001             MOVS     R1,R0
    569            ITStatus bitstatus = RESET;
   \   00000002   0x2000             MOVS     R0,#+0
    570            u32 tmpreg = 0;
   \   00000004   0x2200             MOVS     R2,#+0
    571          
    572            /* Check the parameters */
    573            assert_param(IS_DMA_GET_IT(DMA_IT));
    574          
    575            /* Calculate the used DMA */
    576            if ((DMA_IT & FLAG_Mask) != (u32)RESET)
   \   00000006   0x00CB             LSLS     R3,R1,#+3
   \   00000008   0xD503             BPL.N    ??DMA_GetITStatus_0
    577            {
    578              /* Get DMA2 ISR register value */
    579              tmpreg = DMA2->ISR ;
   \   0000000A   0x....             LDR.N    R3,??DataTable4_3  ;; 0x40020400
   \   0000000C   0x681B             LDR      R3,[R3, #+0]
   \   0000000E   0x001A             MOVS     R2,R3
   \   00000010   0xE002             B.N      ??DMA_GetITStatus_1
    580            }
    581            else
    582            {
    583              /* Get DMA1 ISR register value */
    584              tmpreg = DMA1->ISR ;
   \                     ??DMA_GetITStatus_0:
   \   00000012   0x....             LDR.N    R3,??DataTable4_4  ;; 0x40020000
   \   00000014   0x681B             LDR      R3,[R3, #+0]
   \   00000016   0x001A             MOVS     R2,R3
    585            }
    586          
    587            /* Check the status of the specified DMA interrupt */
    588            if ((tmpreg & DMA_IT) != (u32)RESET)
   \                     ??DMA_GetITStatus_1:
   \   00000018   0x420A             TST      R2,R1
   \   0000001A   0xD002             BEQ.N    ??DMA_GetITStatus_2
    589            {
    590              /* DMA_IT is set */
    591              bitstatus = SET;
   \   0000001C   0x2301             MOVS     R3,#+1
   \   0000001E   0x0018             MOVS     R0,R3
   \   00000020   0xE001             B.N      ??DMA_GetITStatus_3
    592            }
    593            else
    594            {
    595              /* DMA_IT is reset */
    596              bitstatus = RESET;
   \                     ??DMA_GetITStatus_2:
   \   00000022   0x2300             MOVS     R3,#+0
   \   00000024   0x0018             MOVS     R0,R3
    597            }
    598            /* Return the DMA_IT status */
    599            return  bitstatus;
   \                     ??DMA_GetITStatus_3:
   \   00000026   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000028   0x4770             BX       LR               ;; return
    600          }
    601          
    602          /*******************************************************************************
    603          * Function Name  : DMA_ClearITPendingBit
    604          * Description    : Clears the DMAy Channelxs interrupt pending bits.
    605          * Input          : - DMA_IT: specifies the DMA interrupt pending bit to clear.
    606          *                    This parameter can be any combination (for the same DMA) of
    607          *                    the following values:
    608          *                       - DMA1_IT_GL1: DMA1 Channel1 global interrupt.
    609          *                       - DMA1_IT_TC1: DMA1 Channel1 transfer complete interrupt.
    610          *                       - DMA1_IT_HT1: DMA1 Channel1 half transfer interrupt.
    611          *                       - DMA1_IT_TE1: DMA1 Channel1 transfer error interrupt.
    612          *                       - DMA1_IT_GL2: DMA1 Channel2 global interrupt.
    613          *                       - DMA1_IT_TC2: DMA1 Channel2 transfer complete interrupt.
    614          *                       - DMA1_IT_HT2: DMA1 Channel2 half transfer interrupt.
    615          *                       - DMA1_IT_TE2: DMA1 Channel2 transfer error interrupt.
    616          *                       - DMA1_IT_GL3: DMA1 Channel3 global interrupt.
    617          *                       - DMA1_IT_TC3: DMA1 Channel3 transfer complete interrupt.
    618          *                       - DMA1_IT_HT3: DMA1 Channel3 half transfer interrupt.
    619          *                       - DMA1_IT_TE3: DMA1 Channel3 transfer error interrupt.
    620          *                       - DMA1_IT_GL4: DMA1 Channel4 global interrupt.
    621          *                       - DMA1_IT_TC4: DMA1 Channel4 transfer complete interrupt.
    622          *                       - DMA1_IT_HT4: DMA1 Channel4 half transfer interrupt.
    623          *                       - DMA1_IT_TE4: DMA1 Channel4 transfer error interrupt.
    624          *                       - DMA1_IT_GL5: DMA1 Channel5 global interrupt.
    625          *                       - DMA1_IT_TC5: DMA1 Channel5 transfer complete interrupt.
    626          *                       - DMA1_IT_HT5: DMA1 Channel5 half transfer interrupt.
    627          *                       - DMA1_IT_TE5: DMA1 Channel5 transfer error interrupt.
    628          *                       - DMA1_IT_GL6: DMA1 Channel6 global interrupt.
    629          *                       - DMA1_IT_TC6: DMA1 Channel6 transfer complete interrupt.
    630          *                       - DMA1_IT_HT6: DMA1 Channel6 half transfer interrupt.
    631          *                       - DMA1_IT_TE6: DMA1 Channel6 transfer error interrupt.
    632          *                       - DMA1_IT_GL7: DMA1 Channel7 global interrupt.
    633          *                       - DMA1_IT_TC7: DMA1 Channel7 transfer complete interrupt.
    634          *                       - DMA1_IT_HT7: DMA1 Channel7 half transfer interrupt.
    635          *                       - DMA1_IT_TE7: DMA1 Channel7 transfer error interrupt.
    636          *                       - DMA2_IT_GL1: DMA2 Channel1 global interrupt.
    637          *                       - DMA2_IT_TC1: DMA2 Channel1 transfer complete interrupt.
    638          *                       - DMA2_IT_HT1: DMA2 Channel1 half transfer interrupt.
    639          *                       - DMA2_IT_TE1: DMA2 Channel1 transfer error interrupt.
    640          *                       - DMA2_IT_GL2: DMA2 Channel2 global interrupt.
    641          *                       - DMA2_IT_TC2: DMA2 Channel2 transfer complete interrupt.
    642          *                       - DMA2_IT_HT2: DMA2 Channel2 half transfer interrupt.
    643          *                       - DMA2_IT_TE2: DMA2 Channel2 transfer error interrupt.
    644          *                       - DMA2_IT_GL3: DMA2 Channel3 global interrupt.
    645          *                       - DMA2_IT_TC3: DMA2 Channel3 transfer complete interrupt.
    646          *                       - DMA2_IT_HT3: DMA2 Channel3 half transfer interrupt.
    647          *                       - DMA2_IT_TE3: DMA2 Channel3 transfer error interrupt.
    648          *                       - DMA2_IT_GL4: DMA2 Channel4 global interrupt.
    649          *                       - DMA2_IT_TC4: DMA2 Channel4 transfer complete interrupt.
    650          *                       - DMA2_IT_HT4: DMA2 Channel4 half transfer interrupt.
    651          *                       - DMA2_IT_TE4: DMA2 Channel4 transfer error interrupt.
    652          *                       - DMA2_IT_GL5: DMA2 Channel5 global interrupt.
    653          *                       - DMA2_IT_TC5: DMA2 Channel5 transfer complete interrupt.
    654          *                       - DMA2_IT_HT5: DMA2 Channel5 half transfer interrupt.
    655          *                       - DMA2_IT_TE5: DMA2 Channel5 transfer error interrupt.
    656          * Output         : None
    657          * Return         : None
    658          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    659          void DMA_ClearITPendingBit(u32 DMA_IT)
    660          {
    661            /* Check the parameters */
    662            assert_param(IS_DMA_CLEAR_IT(DMA_IT));
    663          
    664            /* Calculate the used DMA */
    665            if ((DMA_IT & FLAG_Mask) != (u32)RESET)
   \                     DMA_ClearITPendingBit:
   \   00000000   0x00C1             LSLS     R1,R0,#+3
   \   00000002   0xD502             BPL.N    ??DMA_ClearITPendingBit_0
    666            {
    667              /* Clear the selected DMA interrupt pending bits */
    668              DMA2->IFCR = DMA_IT;
   \   00000004   0x....             LDR.N    R1,??DataTable4_2  ;; 0x40020404
   \   00000006   0x6008             STR      R0,[R1, #+0]
   \   00000008   0xE001             B.N      ??DMA_ClearITPendingBit_1
    669            }
    670            else
    671            {
    672              /* Clear the selected DMA interrupt pending bits */
    673              DMA1->IFCR = DMA_IT;
   \                     ??DMA_ClearITPendingBit_0:
   \   0000000A   0x....             LDR.N    R1,??DataTable4_1  ;; 0x40020004
   \   0000000C   0x6008             STR      R0,[R1, #+0]
    674            }
    675          }
   \                     ??DMA_ClearITPendingBit_1:
   \   0000000E   0x4770             BX       LR               ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   0x40020008         DC32     0x40020008

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_1:
   \   00000000   0x40020004         DC32     0x40020004

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_2:
   \   00000000   0x40020404         DC32     0x40020404

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_3:
   \   00000000   0x40020400         DC32     0x40020400

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_4:
   \   00000000   0x40020000         DC32     0x40020000
    676          
    677          /******************* (C) COPYRIGHT 2009 STMicroelectronics *****END OF FILE****/
    678          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   DMA_ClearFlag
       0   DMA_ClearITPendingBit
       0   DMA_Cmd
       0   DMA_DeInit
       0   DMA_GetCurrDataCounter
       0   DMA_GetFlagStatus
       0   DMA_GetITStatus
       0   DMA_ITConfig
       4   DMA_Init
       0   DMA_StructInit


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable4
       4  ??DataTable4_1
       4  ??DataTable4_2
       4  ??DataTable4_3
       4  ??DataTable4_4
      16  DMA_ClearFlag
      16  DMA_ClearITPendingBit
      26  DMA_Cmd
     252  DMA_DeInit
       6  DMA_GetCurrDataCounter
      42  DMA_GetFlagStatus
      42  DMA_GetITStatus
      22  DMA_ITConfig
      62  DMA_Init
      46  DMA_StructInit

 
 550 bytes in section .text
 
 550 bytes of CODE memory

Errors: none
Warnings: none
